@model EMPManegment.EntityModels.ViewModels.VendorModels.VendorDetailsView
@using EMPManegment.Web.Models
@inject IHttpContextAccessor Accessor;
@inject UserSession _userSession


@{
    ViewData["Title"] = "CreateVendor";
    Layout = "~/Views/Shared/_HomeLayout.cshtml";
    var imageUrl = Model != null && !string.IsNullOrEmpty(Model.Image) ? Url.Content($"~/{Model.Image}") : null;
    var Vendorinitials = Model != null && !string.IsNullOrEmpty(Model.VendorCompany)
                   ? $"{Model.VendorCompany[0]}".ToUpper()
                   : string.Empty;
}


<!-- start page title -->
<div class="row" style="margin-top:80px;">
    <div class="col-12">
        <div class="page-title-box d-sm-flex align-items-center justify-content-between">
            <h4 class="mb-sm-0">Create Vendor</h4>

            <div class="page-title-right">
                <ol class="breadcrumb m-0">
                    <li class="breadcrumb-item"><a href="javascript: void(0);">Vendor</a></li>
                    <li class="breadcrumb-item active">Create Vendor</li>
                </ol>
            </div>

        </div>
    </div>
</div>
<!-- end page title -->
<form id="createVendorform" autocomplete="off">
    <div class="row">
        <input type="hidden" class="form-control" id="textViewMode" value="@ViewBag.ViewMode.ToString()" readonly />
        <div class="col-lg-8">
            <div class="card">
                <div class="card-header">
                    <ul class="nav nav-tabs-custom card-header-tabs border-bottom-0" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link" role="tab">
                                Business Details
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-lg-6">
                            <div class="mb-3">
                                <label class="form-label" for="companynameInput">Company Name <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" autocomplete="off" id="companynameInput" name="companynameInput" value="@Model.VendorCompany" placeholder="Enter your company name">
                                <input type="hidden" class="form-control" autocomplete="off" id="vendorIdInput" value="@Model.Vid">
                                <input type="hidden" id="txtUpdatedby" value="@_userSession.UserId" />
                            </div>
                        </div>
                        <!--end col-->
                        <div class="col-lg-6">
                            <div class="mb-3">
                                <label for="CompanyType" class="form-label">Company Type <span class="text-danger">*</span></label>
                                @if (Model.VendorCompanyType != null)
                                {
                                    <select class="form-control form-select valid" id="CompanyType" name="CompanyType">
                                        <option value="@Model.VendorCompanyType">@Model.VendorCompanyType</option>
                                        <option value="Merchandising">Merchandising</option>
                                        <option value="Manufacturing">Manufacturing</option>
                                        <option value="Partnership">Partnership</option>
                                        <option value="Corporation">Corporation</option>
                                    </select>
                                }
                                else
                                {
                                    <select class="form-control form-select valid" id="CompanyType" name="CompanyType">
                                        <option value="">Select type</option>
                                        @* <option value="All" selected>All</option>*@
                                        <option value="Merchandising">Merchandising</option>
                                        <option value="Manufacturing">Manufacturing</option>
                                        <option value="Partnership">Partnership</option>
                                        <option value="Corporation">Corporation</option>
                                    </select>
                                }
                            </div>
                        </div>
                        <!--end col-->
                        <div class="col-lg-6">
                            <div class="mb-3">
                                <label for="emailidInput" class="form-label">Email <span class="text-danger">*</span></label>
                                <input type="email" class="form-control" autocomplete="off" id="emailidInput" value="@Model.VendorEmail" name="emailidInput" placeholder="Enter your email">
                            </div>
                        </div>
                        <!--end col-->
                        <div class="col-lg-6">
                            <div class="mb-3">
                                <label for="ddlVendorType" class="form-label">VendorType <span class="text-danger">*</span></label>
                                @if (Model.VendorTypeName != null)
                                {
                                    <select id="ddlVendorType" name="ddlVendorType" class="form-control form-select valid">
                                        <option selected value="@Model.VendorTypeId">@Model.VendorTypeName</option>
                                    </select>
                                }
                                else
                                {
                                    <select id="ddlVendorType" name="ddlVendorType" class="form-control form-select valid">
                                        <option selected value="">--Select Type--</option>
                                    </select>
                                }
                                <input type="hidden" id="VendorTypeInput" name="VendorTypeInput" value="" />
                            </div>
                        </div>
                        <!--end col-->
                        <div class="col-lg-6">
                            <div class="mb-3">
                                <label for="contactnumberInput" class="form-label">Contact Number <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" autocomplete="off" value="@Model.VendorContectNo" id="contactnumberInput" name="contactnumberInput" placeholder="Enter your number">
                            </div>
                        </div>
                        <!--end col-->
                        <div class="col-lg-6">
                            <div class="mb-3">
                                <label for="phonenumberInput" class="form-label">Phone Number <span class="text-danger">*</span></label>
                                <input type="number" class="form-control" autocomplete="off" value="@Model.VendorPhone" id="phonenumberInput" name="phonenumberInput" placeholder="Enter your number">
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="mb-3">
                                <label for="ddlCountry" class="form-label">Country <span class="text-danger">*</span></label>
                                @if (Model.VendorCountryName != null)
                                {
                                    <select id="VendorCountry" name="VendorCountry" class="form-control form-select valid" onchange="fn_getVendorState('VendorState',null,this)">
                                        <option value="@Model.VendorCountry">@Model.VendorCountryName</option>
                                    </select>
                                    <input type="hidden" id="txtcountryId" value="@Model.VendorCountry" />
                                }
                                else
                                {
                                    <select id="VendorCountry" name="VendorCountry" class="form-control form-select valid" onchange="fn_getVendorState('VendorState',null,this)">
                                        <option selected value="">--Select Country--</option>
                                    </select>
                                }
                                <input type="hidden" id="txtcountry" name="txtcountry" value="" />
                            </div>
                        </div>
                        <!--end col-->
                        <div class="col-lg-4">
                            <div class="mb-3">
                                <label for="ddlState" class="form-label">State <span class="text-danger">*</span></label>
                                @if (Model.VendorStateName != null)
                                {
                                    <select id="VendorState" name="VendorState" class="form-control form-select valid" onchange="fn_getVendorcitiesbystateId('VendorCity', null, this)">
                                        <option value="@Model.VendorState">@Model.VendorStateName</option>
                                    </select>
                                }
                                else
                                {
                                    <select id="VendorState" name="VendorState" class="form-control form-select valid" onchange="fn_getVendorcitiesbystateId('VendorCity', null, this)">
                                        <option value="">--Select State--</option>
                                    </select>
                                }
                                <input type="hidden" id="txtstate" name="txtstate" value="" />
                            </div>
                        </div>
                        <!--end col-->
                        <div class="col-lg-4">
                            <div class="mb-3">
                                <label for="ddlCity" class="form-label">City <span class="text-danger">*</span></label>
                                @if (Model.VendorCityName != null)
                                {
                                    <select id="VendorCity" name="VendorCity" class="form-control form-select valid">
                                        <option value="@Model.VendorCity">@Model.VendorCityName</option>
                                    </select>
                                }
                                else
                                {
                                    <select id="VendorCity" name="VendorCity" class="form-control form-select valid">
                                        <option selected value="">--Select City--</option>
                                    </select>
                                }
                                <input type="hidden" id="txtcity" name="txtcity" value="" />
                            </div>
                        </div>
                        <!--end col-->
                        <div class="col-lg-12">
                            <div class="mb-3">
                                <label for="AddressidInput" class="form-label">Address <span class="text-danger">*</span></label>
                                @if (Model.VendorAddress != null)
                                {
                                    <textarea type="text" class="form-control" id="AddressidInput" name="AddressidInput" rows="3" placeholder="Enter your Address">@Model.VendorAddress</textarea>
                                }
                                else
                                {
                                    <textarea type="text" class="form-control" id="AddressidInput" name="AddressidInput" rows="3" placeholder="Enter your Address"></textarea>
                                }
                            </div>
                        </div>
                        <!--end col-->
                        <div class="col-lg-12">
                            <div class="row mb-3">
                                <div class="col-lg-6">
                                    <label for="pincodeidInput" class="form-label">PinCode <span class="text-danger">*</span></label>
                                    <input type="number" class="form-control" autocomplete="off" value="@Model.VendorPinCode" id="pincodeidInput" name="pincodeidInput" placeholder="Enter your Pincode">
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-12">
                            <div class="row mb-3">
                                <div class="col-lg-6">
                                    <label for="companylogoInput" class="form-label">Logo</label>
                                    <input type="file" class="form-control" autocomplete="off" id="companylogoInput" name="companylogoInput">
                                </div>
                                <div class="col-lg-6 d-flex flex-column justify-content-center">
                                    @if (!string.IsNullOrEmpty(Model.VendorCompanyLogo))
                                    {
                                        <div id="VendorImageContainer" style="align-self:center;">
                                            <div id="currentVendorImageName" style="margin-bottom: 10px;" hidden>
                                                @System.IO.Path.GetFileName(Model.VendorCompanyLogo)
                                            </div>
                                            <div style="position: relative; display: inline-block; gap:10px;">
                                                @if (!string.IsNullOrEmpty(Model.VendorCompanyLogo))
                                                {
                                                    <img src="~/Content/Image/@Model.VendorCompanyLogo" class="form-control" id="vendorImagePreview" style="height: 200px;width: 200px;border:2px solid grey; margin-top: -65px;">
                                                }
                                                <div style="position: absolute; top: -65px; right: 5px;">
                                                    <button type="button" id="deleteVendorImageButton" style="background-color: transparent; border: none; font-size: 16px; cursor: pointer; color:red;">&times;</button>
                                                </div>
                                            </div>
                                        </div>
                                    }
                                    else
                                    {
                                        <div class="col-lg-6 d-flex flex-column justify-content-center">
                                            <div id="VendorImageContainer" style="align-self:center; position: relative;">
                                                <div id="DisplayVendorInitials" class="avatar-title bg-success-subtle text-success fs-20 border" style="height: 200px; width: 200px; border: 2px solid grey; margin-top: -65px; display: flex; align-items: center; justify-content: center;">
                                                    <h1>@Vendorinitials</h1>
                                                </div>
                                                <img id="vendorImagePreview" src="#" style="height: 200px; width: 200px; border: 2px solid grey; margin-top: -65px; display: none;" alt="vendorImagePreview" />
                                                <div style="position: absolute; top: -65px; right: 5px;">
                                                    <button type="button" id="deleteVendorImageButton" style="background-color: transparent; border: none; font-size: 16px; cursor: pointer; color: red;">&times;</button>
                                                </div>
                                            </div>
                                        </div>
                                    }
                                </div>
                            </div>
                        </div>
                        <!--end col-->
                    </div>
                </div>
            </div>
            <!-- end card -->
            <div class="text-end mb-3">
                @if (Model.Vid == null || Model.Vid == Guid.Empty)
                {
                    <button type="button" class="btn btn-success btn-lg" onclick="AddVendorDetails()" id="SubmitVendorDetails" style="width: 230px;height: 50px;">Submit</button>
                }
                else
                {
                    @if (UserSession.FormPermisionData.Any(a => a.FormName == "Vendor List" && (a.Edit == true)))
                    {
                        <button type="button" class="btn btn-primary btn-lg" onclick="UpdateVendorDetails('@Model.Vid')" id="updateVendorbtn" style="width: 230px;height: 50px;">Update</button>
                        <button type="button" class="btn btn-primary btn-lg" onclick="EditVendor()" id="editVendorbtn" style="display: none;width: 230px;height: 50px;">Edit</button>
                    }
                }

            </div>
        </div>
        <div class="col-lg-4">
            <div class="card">
                <div class="card-header">
                    <ul class="nav nav-tabs-custom card-header-tabs border-bottom-0" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link" role="tab">
                                Personal Details
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-lg-6">
                            <div class="mb-3">
                                <label for="firstnameInput" class="form-label">First Name <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" value="@Model.VendorFirstName" autocomplete="off" id="firstnameInput" name="firstnameInput" placeholder="Enter your firstname">
                            </div>
                        </div>
                        <!--end col-->
                        <div class="col-lg-6">
                            <div class="mb-3">
                                <label for="lastnameInput" class="form-label">Last Name <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" value="@Model.VendorLastName" autocomplete="off" id="lastnameInput" name="lastnameInput" placeholder="Enter your lastname">
                            </div>
                        </div>
                        <!--end col-->
                        <div class="col-lg-6">
                            <div class="mb-3">
                                <label for="companyemailInput" class="form-label">Email <span class="text-danger">*</span></label>
                                <input type="email" class="form-control" value="@Model.VendorCompanyEmail" id="companyemailInput" name="companyemailInput" placeholder="Enter your email" autocomplete="off">
                            </div>
                        </div>
                        <!--end col-->
                        <div class="col-lg-6">
                            <div class="mb-3">
                                <label for="worknumberInput" class="form-label">Number <span class="text-danger">*</span></label>
                                <input type="number" class="form-control" autocomplete="off" value="@Model.VendorCompanyNumber" id="worknumberInput" name="worknumberInput" placeholder="Enter your number">
                            </div>
                        </div>
                        <!--end col-->
                    </div>
                    <!--end row-->
                </div>
                <!-- end card body -->
            </div>
            <!-- end card -->
            <div class="card">
                <div class="card-header">
                    <ul class="nav nav-tabs-custom card-header-tabs border-bottom-0" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link" role="tab">
                                Bank Details
                            </a>
                        </li>
                    </ul>
                </div>
                <!-- end card header -->
                <div class="card-body">
                    <div class="row">
                        <div class="col-lg-6">
                            <div class="mb-3">
                                <label for="banknameInput" class="form-label">Bank Name <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" value="@Model.VendorBankName" autocomplete="off" id="banknameInput" name="banknameInput" placeholder="Enter your bank name">
                            </div>
                        </div>
                        <!--end col-->
                        <div class="col-lg-6">
                            <div class="mb-3">
                                <label for="branchInput" class="form-label">Branch <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" value="@Model.VendorBankBranch" autocomplete="off" id="branchInput" name="branchInput" placeholder="Branch">
                            </div>
                        </div>
                        <!--end col-->
                        <div class="col-lg-12">
                            <div class="mb-3">
                                <label for="accountnameInput" class="form-label">Account Holder Name <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" value="@Model.VendorAccountHolderName" autocomplete="off" id="accountnameInput" name="accountnameInput" placeholder="Enter account holder name">
                            </div>
                        </div>
                        <!--end col-->
                        <div class="col-lg-6">
                            <div class="mb-3">
                                <label for="accountnumberInput" class="form-label">Account Number <span class="text-danger">*</span></label>
                                <input type="number" class="form-control" value="@Model.VendorBankAccountNo" autocomplete="off" id="accountnumberInput" name="accountnumberInput" placeholder="Enter account number">
                            </div>
                        </div>
                        <!--end col-->
                        <div class="col-lg-6">
                            <div class="mb-3">
                                <label for="ifscInput" class="form-label">IFSC <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" value="@Model.VendorBankIfsc" autocomplete="off" id="ifscInput" name="ifscInput" placeholder="IFSC">
                            </div>
                        </div>
                        <!--end col-->
                        <div class="col-lg-6">
                            <div class="mb-3">
                                <label for="GSTInput" class="form-label">GSTNumber <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" value="@Model.VendorGstnumber" autocomplete="off" id="GSTNumberInput" name="GSTNumberInput" placeholder="GST-Number">
                            </div>
                        </div>
                        <!--end col-->
                    </div>
                    <!--end row-->
                </div>
                <!-- end card body -->
            </div>
            <!-- end card -->
        </div>
        <!-- end col -->
    </div>
    <!-- end row -->
</form>

<script src="~/lib/jquery/dist/jquery.min.js"></script>

<script type="text/javascript">
    var userPermissions = '@Html.Raw(Json.Serialize(UserSession.FormPermisionData))';
    $(document).ready(function () {

        if ($("#textViewMode").val() === "True") {
            document.querySelectorAll('#createVendorform input, #createVendorform select, #createVendorform textarea').forEach(function (element) {
                element.disabled = true;
            });
            $("#createVendorform button").hide();
            $("#editVendorbtn").show();
        }
        else {
            document.querySelectorAll('#createVendorform input, #createVendorform select, #createVendorform textarea').forEach(function (element) {
                element.disabled = false;
            });
        }
    });
   
</script>


<script src="~/moduls/vendordetailsscript.js" asp-append-version="true"></script>