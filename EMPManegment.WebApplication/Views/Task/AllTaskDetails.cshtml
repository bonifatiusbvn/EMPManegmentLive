
@{
    ViewData["Title"] = "AllTaskDetails";
    Layout = "~/Views/Shared/_UserHomeLayout.cshtml";
}

<style>
    #taskType-error.error, #dealTitle-error, #ddlusername-error.error,
    #txtdatetime-error, #txtenddatetime-error, #contactDescription-error {
        color: red;
    }

    label.failed {
        border: red thin solid;
    }
</style>


    <div class="page-content">
        <div class="container-fluid">
            <!-- start page title -->
            <div class="row">
                <div class="col-12">
                    <div class="page-title-box d-sm-flex align-items-center justify-content-between">
                        <h4 class="mb-sm-0">Tasks List</h4>

                        <div class="page-title-right">
                            <ol class="breadcrumb m-0">
                                <li class="breadcrumb-item"><a href="javascript: void(0);">Tasks</a></li>
                                <li class="breadcrumb-item active">Tasks List</li>
                            </ol>
                        </div>

                    </div>
                </div>
            </div>
            <!-- end page title -->

            <div class="row">
                <div class="col-xxl-3 col-sm-6">
                    <div class="card card-animate">
                        <div class="card-body">
                            <div class="d-flex justify-content-between">
                                <div>
                                    <p class="fw-medium text-muted mb-0">Total Tasks</p>
                                    <h2 class="mt-4 ff-secondary fw-semibold"><span class="counter-value" data-target="234">0</span>k</h2>
                                    <p class="mb-0 text-muted">
                                        <span class="badge bg-light text-success mb-0">
                                            <i class="ri-arrow-up-line align-middle"></i> 17.32 %
                                        </span> vs. previous month
                                    </p>
                                </div>
                                <div>
                                    <div class="avatar-sm flex-shrink-0">
                                        <span class="avatar-title bg-primary-subtle text-primary rounded-circle fs-4">
                                            <i class="ri-ticket-2-line"></i>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div><!-- end card body -->
                    </div> <!-- end card-->
                </div>
                <!--end col-->
                <div class="col-xxl-3 col-sm-6">
                    <div class="card card-animate">
                        <div class="card-body">
                            <div class="d-flex justify-content-between">
                                <div>
                                    <p class="fw-medium text-muted mb-0">Pending Tasks</p>
                                    <h2 class="mt-4 ff-secondary fw-semibold"><span class="counter-value" data-target="64.5">0</span>k</h2>
                                    <p class="mb-0 text-muted">
                                        <span class="badge bg-light text-danger mb-0">
                                            <i class="ri-arrow-down-line align-middle"></i> 0.87 %
                                        </span> vs. previous month
                                    </p>
                                </div>
                                <div>
                                    <div class="avatar-sm flex-shrink-0">
                                        <span class="avatar-title bg-primary-subtle text-primary rounded-circle fs-4">
                                            <i class="mdi mdi-timer-sand"></i>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div><!-- end card body -->
                    </div>
                </div>
                <!--end col-->
                <div class="col-xxl-3 col-sm-6">
                    <div class="card card-animate">
                        <div class="card-body">
                            <div class="d-flex justify-content-between">
                                <div>
                                    <p class="fw-medium text-muted mb-0">Completed Tasks</p>
                                    <h2 class="mt-4 ff-secondary fw-semibold"><span class="counter-value" data-target="116.21">0</span>K</h2>
                                    <p class="mb-0 text-muted">
                                        <span class="badge bg-light text-danger mb-0">
                                            <i class="ri-arrow-down-line align-middle"></i> 2.52 %
                                        </span> vs. previous month
                                    </p>
                                </div>
                                <div>
                                    <div class="avatar-sm flex-shrink-0">
                                        <span class="avatar-title bg-primary-subtle text-primary rounded-circle fs-4">
                                            <i class="ri-checkbox-circle-line"></i>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div><!-- end card body -->
                    </div>
                </div>
                <!--end col-->
                <div class="col-xxl-3 col-sm-6">
                    <div class="card card-animate">
                        <div class="card-body">
                            <div class="d-flex justify-content-between">
                                <div>
                                    <p class="fw-medium text-muted mb-0">Deleted Tasks</p>
                                    <h2 class="mt-4 ff-secondary fw-semibold"><span class="counter-value" data-target="14.84">0</span>%</h2>
                                    <p class="mb-0 text-muted">
                                        <span class="badge bg-light text-success mb-0">
                                            <i class="ri-arrow-up-line align-middle"></i> 0.63 %
                                        </span> vs. previous month
                                    </p>
                                </div>
                                <div>
                                    <div class="avatar-sm flex-shrink-0">
                                        <span class="avatar-title bg-primary-subtle text-primary rounded-circle fs-4">
                                            <i class="ri-delete-bin-line"></i>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div><!-- end card body -->
                    </div>
                </div>
                <!--end col-->
            </div>
            <!--end row-->

            <div class="row">
                <div class="col-lg-12">
                    <div class="card" id="tasksList">
                        <div class="card-header border-0">
                            <div class="d-flex align-items-center">
                                <h5 class="card-title mb-0 flex-grow-1">All Tasks</h5>
                                <div class="flex-shrink-0">
                                    <div class="d-flex flex-wrap gap-2">
                                    <button class="btn btn-soft-primary" data-bs-toggle="modal" onclick="showadddetails()"><i class="ri-add-line align-bottom me-1"></i> Create Task</button>
                                        <button class="btn btn-soft-secondary" id="remove-actions" onClick="deleteMultiple()"><i class="ri-delete-bin-2-line"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card-body border border-dashed border-end-0 border-start-0">
                            <form>
                                <div class="row g-3">
                                    <div class="col-xxl-5 col-sm-12">
                                        <div class="search-box">
                                            <input type="text" class="form-control search bg-light border-light" placeholder="Search for tasks or something...">
                                            <i class="ri-search-line search-icon"></i>
                                        </div>
                                    </div>
                                    <!--end col-->

                                    <div class="col-xxl-3 col-sm-4">
                                        <input type="text" class="form-control bg-light border-light" id="demo-datepicker" data-provider="flatpickr" data-date-format="d M, Y" data-range-date="true" placeholder="Select date range">
                                    </div>
                                    <!--end col-->

                                    <div class="col-xxl-3 col-sm-4">
                                        <div class="input-light">
                                            <select class="form-control" data-choices data-choices-search-false name="choices-single-default" id="idStatus">
                                                <option value="">Status</option>
                                                <option value="all" selected>All</option>
                                                <option value="New">New</option>
                                                <option value="Pending">Pending</option>
                                                <option value="Inprogress">Inprogress</option>
                                                <option value="Completed">Completed</option>
                                            </select>
                                        </div>
                                    </div>
                                    <!--end col-->
                                    <div class="col-xxl-1 col-sm-4">
                                        <button type="button" class="btn btn-primary w-100" onclick="SearchData();">
                                            <i class="ri-equalizer-fill me-1 align-bottom"></i>
                                            Filters
                                        </button>
                                    </div>
                                    <!--end col-->
                                </div>
                                <!--end row-->
                            </form>
                        </div>
                        <!--end card-body-->
                        <div class="card-body">
                            <div class="table-responsive table-card mb-4">
                                <table class="table table-bordered table-striped align-middle" id="tasksTable">
                                    <thead class="table-light text-muted text-center">
                                        <tr>
                                        <th class="sort" data-sort="UserName">UserName</th>
                                        <th class="sort" data-sort="TaskTitle">TaskTitle</th>
                                        <th class="sort" data-sort="TaskDetails">TaskDetails</th>
                                        <th class="sort" data-sort="TaskType">TaskType</th>
                                        <th class="sort" data-sort="TaskDate">TaskDate</th>
                                        <th class="sort" data-sort="TaskEndDate">TaskEndDate</th>
                                        <th class="sort" data-sort="TaskStatus">TaskStatus</th>
                                        </tr>
                                    </thead>
                                    <tbody class="list form-check-all" id="AllTaskDetails">
                                     @*   <tr>
                                            <th scope="row">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" name="chk_child" value="option1">
                                                </div>
                                            </th>
                                            <td class="id"><a href="apps-tasks-details.html" class="fw-medium link-primary">#VLZ501</a></td>
                                            <td class="project_name">
                                                <a href="apps-projects-overview.html" class="fw-medium link-primary">
                                                    Velzon -
                                                    v1.0.0
                                                </a>
                                            </td>
                                            <td>
                                                <div class="d-flex">
                                                    <div class="flex-grow-1 tasks_name">Profile Page Satructure</div>
                                                    <div class="flex-shrink-0 ms-4">
                                                        <ul class="list-inline tasks-list-menu mb-0">
                                                            <li class="list-inline-item"><a href="apps-tasks-details.html"><i class="ri-eye-fill align-bottom me-2 text-muted"></i></a></li>
                                                            <li class="list-inline-item"><a class="edit-item-btn" href="#showModal" data-bs-toggle="modal"><i class="ri-pencil-fill align-bottom me-2 text-muted"></i></a></li>
                                                            <li class="list-inline-item">
                                                                <a class="remove-item-btn" data-bs-toggle="modal" href="#deleteOrder">
                                                                    <i class="ri-delete-bin-fill align-bottom me-2 text-muted"></i>
                                                                </a>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                            </td>
                                            <td class="client_name">Robert McMahon</td>
                                            <td class="assignedto">
                                                <div class="avatar-group">
                                                    <a href="javascript: void(0);" class="avatar-group-item" data-bs-toggle="tooltip" data-bs-trigger="hover" data-bs-placement="top" title="Frank">
                                                        <img src="assets/images/users/avatar-3.jpg" alt="" class="rounded-circle avatar-xxs" />
                                                    </a>
                                                    <a href="javascript: void(0);" class="avatar-group-item" data-bs-toggle="tooltip" data-bs-trigger="hover" data-bs-placement="top" title="Anna">
                                                        <img src="assets/images/users/avatar-1.jpg" alt="" class="rounded-circle avatar-xxs" />
                                                    </a>
                                                </div>
                                            </td>
                                            <td class="due_date">25 Jan, 2022</td>
                                            <td class="status"><span class="badge bg-secondary-subtle text-secondary text-uppercase">Inprogress</span></td>
                                            <td class="priority"><span class="badge bg-danger text-uppercase">High</span></td>
                                        </tr>*@
                                    </tbody>
                                </table>
                                <!--end table-->
                                <div class="noresult" style="display: none">
                                    <div class="text-center">
                                        <lord-icon src="https://cdn.lordicon.com/msoeawqm.json" trigger="loop" colors="primary:#25a0e2,secondary:#00bd9d" style="width:75px;height:75px"></lord-icon>
                                        <h5 class="mt-2">Sorry! No Result Found</h5>
                                        <p class="text-muted mb-0">We've searched more than 200k+ tasks We did not find any tasks for you search.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="d-flex justify-content-end mt-2">
                                <div class="pagination-wrap hstack gap-2">
                                    <a class="page-item pagination-prev disabled" href="#">
                                        Previous
                                    </a>
                                    <ul class="pagination listjs-pagination mb-0"></ul>
                                    <a class="page-item pagination-next" href="#">
                                        Next
                                    </a>
                                </div>
                            </div>
                        </div>
                        <!--end card-body-->
                    </div>
                    <!--end card-->
                </div>
                <!--end col-->
            </div>
            <!--end row-->

            <div class="modal fade flip" id="deleteOrder" tabindex="-1" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-body p-5 text-center">
                            <lord-icon src="https://cdn.lordicon.com/gsqxdxog.json" trigger="loop" colors="primary:#25a0e2,secondary:#00bd9d" style="width:90px;height:90px"></lord-icon>
                            <div class="mt-4 text-center">
                                <h4>You are about to delete a task ?</h4>
                                <p class="text-muted fs-14 mb-4">
                                    Deleting your task will remove all of
                                    your information from our database.
                                </p>
                                <div class="hstack gap-2 justify-content-center remove">
                                    <button class="btn btn-link btn-ghost-primary fw-medium text-decoration-none" id="deleteRecord-close" data-bs-dismiss="modal"><i class="ri-close-line me-1 align-middle"></i> Close</button>
                                    <button class="btn btn-primary" id="delete-record">Yes, Delete It</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--end delete modal -->

        <div class="modal fade zoomIn" id="showDetailsModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-lg">
                <div class="modal-content border-0">
                    <div class="modal-header p-3 bg-primary-subtle">
                        <h5 class="modal-title" id="exampleModalLabel">Task Details</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" id="close-modal"></button>
                    </div>
                    <form class="tablelist-form" autocomplete="off">
                        <div class="modal-body">
                            <div class="row g-3">
                                <div class="col-lg-12">
                                    <label for="projectName-field" class="form-label">UserName</label>
                                    <span id="UserName" class="form-control"></span>
                                </div>
                                <!--end col-->
                                <div class="col-lg-12">
                                    <div>
                                        <label for="TaskTitle" class="form-label">TaskTitle</label>
                                        <span id="taskTitle-field" class="form-control"></span>
                                    </div>
                                </div>
                                <!--end col-->
                                <div class="col-lg-12">
                                    <label for="TaskDescription" class="form-label">Description</label>
                                    <textarea class="form-control " id="taskDescription-field" rows="3" readonly></textarea>
                                </div>
                                <!--end col-->
                                <div class="col-lg-6">
                                    <label for="TaskDate" class="form-label">Start Date</label>
                                    <span id="taskstartdate-field" class="form-control"> </span>
                                </div>
                                <!--end col-->
                                <div class="col-lg-6">
                                    <label for="TaskEndDate" class="form-label">Due Date</label>
                                    <span id="taskenddate-field" class="form-control"></span>
                                </div>
                                <!--end col-->
                                <div class="col-lg-6">
                                    <label for="TaskPriority" class="form-label">TaskType</label>
                                    <span id="taskpriority-field" class="form-control"></span>
                                </div>
                                <!--end col-->
                                <div class="col-lg-6">
                                    <label for="TaskStatus" class="form-label">Status</label>
                                    <span id="taskstatus-field" class="form-control"></span>
                                </div>
                                <!--end col-->
                            </div>
                            <!--end row-->
                        </div>
                        <div class="modal-footer">
                            <div class="hstack gap-2 justify-content-end">
                                <button type="button" class="btn btn-light" id="close-modal" data-bs-dismiss="modal">Close</button>
                                <!-- <button type="submit" class="btn btn-success" id="add-btn">Add Task</button> -->
                                <!-- <button type="button" class="btn btn-success" id="edit-btn">Update Task</button> -->
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
            <!--end modal-->


        <div class="modal fade zoomIn" id="UpdateTaskDetails" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-lg">
                <div class="modal-content border-0">
                    <div class="modal-header p-3 bg-primary-subtle">
                        <h5 class="modal-title" id="exampleModalLabel">Update Task</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" id="close-modal"></button>
                    </div>
                    <form class="tablelist-form" autocomplete="off" id="UpdateDetailsForm">
                        <div class="modal-body">
                            <input type="hidden" id="tasksId" />
                            <div class="row g-3">
                                <div class="col-lg-12">
                                    <label for="projectName-field" class="form-label">UserName</label>
                                    <input type="text" id="EditUserName" class="form-control" readonly/>
                                    <input type="text" id="EditId" class="form-control" hidden/>
                                </div>
                                <!--end col-->
                                <div class="col-lg-12">
                                    <div>
                                        <label for="TaskTitle" class="form-label">TaskTitle</label>
                                        <input type="text" id="EditTaskTitle" class="form-control" required />
                                        <span id="ValidateTaskTitle" class="text-danger"></span>
                                    </div>
                                </div>
                                <div class="col-lg-12">
                                    <div>
                                        <label for="TaskDescription" class="form-label">Description</label>
                                        <input type="text" id="EditDescription" class="form-control" required />
                                        <span id="ValidateDescription" class="text-danger"></span>
                                    </div>
                                </div>
                                <!--end col-->
                                <div class="col-lg-6">
                                    <label for="TaskDate" class="form-label">Start Date</label>
                                    <input type="date" id="EditStartDate" class="form-control" required />
                                    <span id="ValidateStartDate" class="text-danger"></span>
                                </div>
                                <!--end col-->
                                <div class="col-lg-6">
                                    <label for="TaskEndDate" class="form-label">Due Date</label>
                                    <input type="date" id="EditEndDate" class="form-control" data-provider="flatpickr" placeholder="Due date" required />
                                    <span id="ValidateEndDate" class="text-danger"></span>
                                </div>
                                <!--end col-->
                                <div class="col-lg-6">
                                    <label for="TaskStatus" class="form-label">Status</label>
                                    <select class="form-control" id="EditStatus">
                                        <option value="Working">Working</option>
                                        <option value="Completed">Completed</option>
                                        <option value="Pending">Pending</option>
                                    </select>
                                </div>
                                <!--end col-->
                                <div class="col-lg-6">
                                    <select class="form-control" id="EditTaskType" hidden>
                                        <option value="HighPriority">HighPriority</option>
                                        <option value="MediumPriority">MediumPriority</option>
                                        <option value="LowPriority">LowPriority</option>
                                    </select>
                                    <input id="EditTaskTypeId" class="form-control" hidden />
                                </div>
                                <!--end col-->
                            </div>
                            <!--end row-->
                        </div>
                        <div class="modal-footer">
                            <div class="hstack gap-2 justify-content-end">
                                <button type="button" class="btn btn-light" id="close-modal" data-bs-dismiss="modal">Close</button>
                                <button type="button" class="btn btn-success" onclick="UpdateTaskDetails()" id="add-btn">Update Task</button>
                                <!-- <button type="button" class="btn btn-success" id="edit-btn">Update Task</button> -->
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        </div>
        <!-- container-fluid -->
    <!-- Modal -->
    <div class="modal fade" id="addtasks" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header bg-light p-3">
                    <h5 class="modal-title" id="exampleModalLabel">Create Deals</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="frmtaskdetails">
                        <div class="mb-3">
                            <label for="taskType" class="form-label">Task Type</label>
                            <select class="form-control" id="taskType" name="taskType">
                                <option selected disabled value=""></option>
                            </select>
                            <input type="hidden" class="form-control" id="txtTaskType">

                        </div>

                        <div class="mb-3">
                            <label class="form-label">Task Title</label>
                            <input type="text" id="dealTitle" class="form-control" name="dealTitle" placeholder="Enter title" />
                        </div>

                        <div class="mb-3">
                            <label for="ddlusername" class="form-label">Task ProvideTo</label>
                            <select class="form-control" id="ddlusername" name="ddlusername">
                                <option selected disabled value=""></option>
                            </select>
                            <input type="hidden" class="form-control" id="txtguserid">

                        </div>
                        <div class="mb-3">
                            <label for="dueDate" class="form-label">Task Start-Date</label>
                            <input type="datetime-local" class="form-control material_blue" id="txtdatetime" name="txtdatetime" />

                        </div>
                        <div class="mb-3">
                            <label for="dealEmail" class="form-label">Task End-Date</label>
                            <input type="datetime-local" class="form-control material_blue" id="txtenddatetime" name="txtenddatetime">

                        </div>
                        <div class="mb-3">
                            <label for="contactDescription" class="form-label">Task Description</label>
                            <textarea class="form-control " id="contactDescription" rows="3" placeholder="Enter description" name="contactDescription"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-light" id="close-modal" data-bs-dismiss="modal" onclick="ClearTextBox()">Close</button>
                    <button type="submit" class="btn btn-success" onclick="btnSaveTaskDetail();" id="taskDetails" value="Validate">Save</button>
                </div>
            </div>
        </div>
    </div>
    <!--end modal-->
</div>
    </div>

<script src="~/lib/jquery/dist/jquery.js"></script>
<script src="~/lib/jquery/dist/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
<script src="~/lib/jquery-validation/dist/jquery.validate.js"></script>
<script src="~/moduls/taskscript.js"></script>