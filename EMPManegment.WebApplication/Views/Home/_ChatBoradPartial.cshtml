@model IEnumerable<EMPManegment.EntityModels.ViewModels.Chat.ChatMessagesView>
@inject EMPManegment.Web.Helper.Common CommonHelper

@using EMPManegment.Web.Models;
@inject IHttpContextAccessor Accessor;
@inject UserSession _userSession

@foreach (var item in Model)
{
    var imageUrl = !string.IsNullOrEmpty(@item.UserImage) ? Url.Content($"~/{@item.UserImage}") : null;
    var initials = (!string.IsNullOrEmpty(@item.UserName)) ? $"{@item.UserName[0]}".ToUpper() : null;

    <a href="javascript:void(0);" onclick="GetConversation('@item.ConversationId')" class="d-flex align-items-center">
        <div class="flex-shrink-0 me-2 avatar-xxs chatlist-user-image">
            @if (!string.IsNullOrEmpty(imageUrl))
            {
                <img class="img-fluid rounded-circle" src="~/@item.UserImage" alt="">
            }
            else
            {
                <div class="flex-shrink-0 avatar-xs me-2">
                    <div class="avatar-title bg-success-subtle text-success rounded-circle fs-13" style="height:25px;width:25px;">@initials</div>
                </div>
            }
        </div>

        <div class="flex-grow-1 chat-user-box overflow-hidden">
            <h5 class="fs-13 text-truncate mb-0 chatlist-user-name">@item.UserName</h5>
            <small class="text-muted text-truncate mb-0">@item.MessageText</small>
        </div>
    </a>
    <br />
}